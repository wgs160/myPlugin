!function(e,t,a){"function"==typeof define&&define.cmd?define(function(r,i,s){s.exports=e(t,a)}):a.address=e.call(a,t,a)}(function(e,t){function a(e,t,a,i){function s(t){var s=a.querySelector("ul[state='"+e+"']");s.innerHTML="",s.insertAdjacentHTML("beforeend",r(t)),"undefined"!=typeof i&&i()}var d={state:e,selectId:t};c({param:d,url:f.url,success:s})}function r(e){for(var t="",a=0;a<e.length;a++){var r=e[a];t+="<li selectid="+r.id+" >"+r.name+"</li>"}return t}function i(e){return e=e||window.event,e.target||e.srcElement}function s(e,t){for(key in t)void 0!==t[key]&&(e[key]=t[key]);return e}function d(e,t){var t=t.replace(".",""),a=" "+e.className+" ";return-1!=a.indexOf(" "+t+" ")}function n(e,t){return-1===e?[].slice.call(t,e)[0]:[].slice.call(t,e,+e+1)[0]}function o(e,t){return Array.prototype.indexOf.call(e,t)}function c(a){function r(){d.removeChild(i),delete t[s]}var i=document.createElement("script"),s="callback"+h,d=e.querySelector("head"),n="";for(key in a.param)n+="&&"+key+"="+a.param[key];i.type="text/javascript",i.src=a.url+"?callback="+s+n,h++,t[s]=function(e){a.success(e.data),r()},d.appendChild(i)}var l=0,u=!1,f={open:"",tarParent:"body",columns:[{state:"prov",text:"请选择省",disable:!1,id:""},{state:"city",text:"请选择市",disable:!1,id:""},{state:"area",text:"请选择区",disable:!1,id:""},{state:"town",text:"请选择乡",disable:!1,id:""}],url:"http://www.suning.com/emall/SNAddressQueryCmd",callback:function(){}},m='.ui-m-address{position:fixed;top:0;left:100%;width:100%;height:100%;background:#FFF;z-index:100;overflow:auto;-webkit-transition:all .5s ease-out}.ui-m-address .address-box{width:100%;height:100%}.ui-m-address .address-tab{overflow:hidden;width:100%;position:absolute;top:1.76rem;bottom:0;left:0}.ui-m-address .address-tab-nav{height:1.86rem;background:#fff;line-height:1.76rem;text-align:center;box-shadow:0 -1px 0 #dcdcdc inset;display:-webkit-flex!important;display:-webkit-box}.ui-m-address .address-tab-nav li{-webkit-flex:1!important;-webkit-box-flex:1;font-size:.6rem}.ui-m-address .address-tab-nav li.cur{border-bottom:.12rem solid #eda200;color:#f29400;font-size:.65rem}.ui-m-address .address-tab-nav li.disabled{color:#cacaca}.ui-m-address .address-tab-content{position:absolute;top:1.86rem;bottom:0;left:0;-webkit-transition-property:all;-webkit-transition-duration:300ms;-webkit-transition-timing-function:cubic-bezier(.1,.57,.1,1)}.ui-m-address .city-list{height:100%;overflow-y:auto;background:#f2f2f2}.ui-m-address .city-list li{height:1.8rem;line-height:1.8rem;border-bottom:1px solid #dcdcdc;text-indent:.6rem}.ui-m-address .city-list li.cur,.city-list li:active,.city-list li:hover{background:#dcdcdc;color:#eda200}.ui-m-address .address-nav{position:relative;height:1.76rem;background:#f8f8f8;line-height:1.76rem;font-size:.6rem;border-bottom:1px solid #dcdcdc}.ui-m-address .address-back{position:absolute;left:.1rem;top:0;width:1.5rem;height:1.5rem;margin:0 .56rem}.ui-m-address .address-back:before{content:"";position:absolute;top:.6rem;left:0;display:inline-block;width:.48rem;height:.48rem;border:solid #353d44;border-width:1px 0 0 1px;-webkit-transform:rotate(-45deg)}.ui-m-address .address-nav-title{width:60%;margin:0 auto;color:#353d44;text-align:center}.ui-m-address.slideShow{-webkit-transition:all .5s ease-out;-webkit-transform:translateX(-100%);transform:translateX(-100%);}.ui-m-address-oh {overflow-y: hidden;}',b=function(e){var t=s(f,e);return 0==t.open.length?(alert("请绑定开关对象"),!1):(this.data={prov:{name:"",id:""},city:{name:"",id:""},area:{name:"",id:""},town:{name:"",id:""}},this.columns=t.columns,this.tarParent=t.tarParent,this.open=t.open,this.url=t.url,this.callback=t.callback,this.uuid=l,l++,void this.init())};b.prototype={constructor:b,init:function(){var t=this;t.creatHtml(),t.$address=e.querySelector("#nn_address"+t.uuid),t.loadcss(),t.closeBind(),t.openBind(),t.navInit(),t.firstDataInit(),t.contBind()},loadcss:function(){if(!u){var t=e.createElement("style");t.type="text/css",t.innerText=m,e.querySelector("head").appendChild(t),u=!0}},creatHtml:function(){var t=this,a='<div id="nn_address'+t.uuid+'" class="ui-m-address" ><div class="address-nav"><div class="address-back"></div><div class="address-nav-title">地址选择</div></div><div class="address-tab"><ul class="address-tab-nav"></ul><div class="address-tab-content wbox"></div></div></div>';e.querySelector(t.tarParent).insertAdjacentHTML("beforeend",a)},closeBind:function(){var t=this,a=t.$address.querySelector(".address-back");a.addEventListener("click",function(){t.$address.classList.remove("slideShow"),e.body.classList.remove("ui-m-address-oh"),e.documentElement.classList.remove("ui-m-address-oh")})},openBind:function(){var t,a=this,r=e.querySelector(a.open),i=a.$address.querySelector(".address-tab-nav");r.addEventListener("click",function(){t=i.querySelectorAll("li"),a.$address.classList.add("slideShow"),t&&0!=t.length&&n(0,t).click(),e.body.classList.add("ui-m-address-oh"),e.documentElement.classList.add("ui-m-address-oh")})},navInit:function(){for(var e,t=this,a=t.$address.querySelector(".address-tab-nav"),r=t.$address.querySelector(".address-tab-content"),i=t.columns.length,s=0;i>s;s++){var n="",c=t.columns[s].text;if(0==c.length)switch(t.columns[s].state){case"prov":c="请选择省";break;case"city":c="请选择市";break;case"area":c="请选择区";break;case"town":c="请选择乡"}t.columns[s].disable&&(n="disabled"),a.insertAdjacentHTML("beforeEnd","<li class='"+n+"' state='"+t.columns[s].state+"' selectid='"+t.columns[s].id+"' >"+c+"</li>"),r.insertAdjacentHTML("beforeEnd","<div class='address-box wbox-flex'><ul state='"+t.columns[s].state+"' class='city-list'></ul></div>")}e=a.querySelectorAll("li");var l=100*e.length+"%";r.style.width=l;var u=r.querySelector(".address-box").offsetWidth;[].forEach.call(e,function(e){e.addEventListener("click",function(){var e=o(this.parentNode.children,this);return d(this,"disabled")?(this.nextElementSibling.click(),!1):([].forEach.call(this.parentNode.childNodes,function(e){e.classList.remove("cur")}),this.classList.add("cur"),void(r.style.cssText="width:"+l+";-webkit-transform: translateX(-"+u*e+"px);transform: translateX(-"+u*e+"px);"))})})},firstDataInit:function(){function e(){for(var e=0;e<i.length;e++)!function(e){var d=n(e,i).getAttribute("selectid"),o=n(e,i).innerHTML;if(parseInt(d)>0)switch(n(e,i).getAttribute("state")){case"prov":if(t.data.prov.id=d,t.data.prov.name=o,s.querySelector("li[selectid='"+d+"']").classList.add("cur"),1==i.length)return;a("city",d,s,function(){var e=r.querySelector("li[state='city']").getAttribute("selectid");return e?void s.querySelector("li[selectid='"+e+"']").classList.add("cur"):!1});break;case"city":if(t.data.city.id=d,t.data.city.name=o,2==i.length)return;a("area",d,s,function(){var e=r.querySelector("li[state='area']").getAttribute("selectid");return e?void s.querySelector("li[selectid='"+e+"']").classList.add("cur"):!1});break;case"area":if(t.data.area.id=d,t.data.area.name=o,3==i.length)return;a("town",d,s,function(){var e=r.querySelector("li[state='town']").getAttribute("selectid");return e?void s.querySelector("li[selectid='"+e+"']").classList.add("cur"):!1});break;case"town":t.data.town.id=d,t.data.town.name=o}}(e)}var t=this,r=t.$address.querySelector(".address-tab-nav"),i=r.querySelectorAll("li"),s=t.$address.querySelector(".address-tab-content");a("prov",0,s,e)},contBind:function(){var e=this,t=e.$address.querySelector(".address-tab-nav"),r=t.querySelectorAll("li"),s=e.$address.querySelector(".address-tab-content"),d=e.columns.length;s.addEventListener("click",function(t){function c(){e.$address.classList.remove("slideShow"),e.callback(e.data)}i(t);var l=i(t);if("li"==l.tagName.toLowerCase()){var u=o(l.parentNode.parentNode.parentNode.childNodes,l.parentNode.parentNode),f=l.parentNode.getAttribute("state"),m=l.getAttribute("selectid");if([].forEach.call(l.parentNode.childNodes,function(e){e.classList.remove("cur")}),l.classList.add("cur"),n(u,r).innerHTML=l.innerHTML,u+1!=d&&n(u+1,r).click(),"prov"==f){if(e.data.prov.id=m,e.data.prov.name=l.innerHTML,1==d)return c(),!1;a("city",m,s,function(){1==s.querySelector("ul[state='city']").querySelectorAll("li").length&&s.querySelector("ul[state='city']").querySelectorAll("li")[0].click()})}if("city"==f){if(e.data.city.id=m,e.data.city.name=l.innerHTML,2==d)return c(),!1;a("area",m,s)}if("area"==f){if(e.data.area.id=m,e.data.area.name=l.innerHTML,3==d)return c(),!1;a("town",m,s)}"town"==f&&(e.data.town.id=m,e.data.town.name=l.innerHTML,c())}})}};var h=0;return b},document,window);