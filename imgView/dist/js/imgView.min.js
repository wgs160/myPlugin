!function(t,e,i){"function"==typeof define&&define.cmd?define(function(n,s,o){o.exports=t(e,i)}):i.imgView=t.call(i,e,i)}(function(t,e){function i(t,e){for(key in e)void 0!==e[key]&&(t[key]=e[key]);return t}var n=0,s=!1,o="onorientationchange"in e?"orientationchange":"resize",a={open:"",tarParent:"body",urlList:[]},r=".ui-m-iv{position:fixed;top:0;left:0;width:100%;height:100%;z-index:4}.ui-m-iv li{position:absolute;top:0;left:0;height:100%;width:100%;background-position:center center;background-repeat:no-repeat;background-size:contain}.ui-m-iv .tran{-webkit-transition:all .3s ease-out}.ui-m-iv-mask{position:fixed;top:0;width:100%;height:100%;background:#000;z-index:3;opacity:.3}.ui-m-iv-oh{overflow-y:hidden}.hide{display:none}",l=function(t){var s=i(a,t);return 0==s.open.length?(alert("请绑定开关对象"),!1):(this.uuid=n,this.index=0,this.pre=0,this.next=0,this.startPos={x:0,y:0},this.endPos={x:0,y:0},this.len=s.urlList.length,this.urlList=s.urlList,this.open=s.open,this.tarParent=s.tarParent,this.callback=s.callback,this.$ul=null,this.$lis=null,this.itemWidth=e.screen.width,n++,void this.init())};return l.prototype={constructor:l,init:function(){var i=this;return i.creatHtml(),i.loadCss(),i.$ul=t.querySelector("#it"+i.uuid),i.$lis=i.$ul.querySelectorAll("li"),i.openBind(),i.closeBind(),i.len<=1?!1:(i.setIndex(0),i.touchStart(),i.touchMove(),i.touchEnd(),void e.addEventListener(o,function(){i.itemWidth=e.screen.width},!1))},loadCss:function(){if(!s){var e=t.createElement("style");e.type="text/css",e.innerText=r,t.querySelector("head").appendChild(e),s=!0}},creatHtml:function(){var e=this,i="";2==e.len&&(e.len=4,e.urlList=e.urlList.concat(e.urlList));100*e.len+"%";e.urlList.forEach(function(t,n){var s="",o="";n==e.len-1&&0!=n?(o="transform: translateX(-100%)",s="hide"):0!=n&&(o="transform: translateX(100%)",s="hide"),i+="<li class='"+s+"' style='background-image: url("+t+");"+o+"'></li>"});var n="<ul  class='ui-m-iv hide' id='it"+e.uuid+"'>"+i+"</ul>";t.querySelector(e.tarParent).insertAdjacentHTML("beforeend",n)},closeBind:function(){var t=this;t.$ul.addEventListener("click",function(){t.$ul.classList.add("hide"),t.closeMask()})},openBind:function(){var e=this;t.querySelector(e.open).addEventListener("click",function(){e.getMask(),e.$ul.classList.remove("hide")})},touchStart:function(t){function e(t){var e=t.targetTouches[0];i.startPos={x:e.pageX,y:e.pageY},[].forEach.call(i.$lis,function(t,e){t.classList.remove("tran","hide")})}var i=this;i.$ul.addEventListener("touchstart",e)},touchMove:function(t){function e(t){if(!(t.targetTouches.length>1||t.scale&&1!==t.scale)){var e=t.targetTouches[0];i.endPos={x:e.pageX-i.startPos.x,y:e.pageY-i.startPos.y},t.preventDefault(),i.$lis[i.index].style.transform="translateX("+i.endPos.x+"px)",i.$lis[i.pre].style.transform="translateX("+(-i.itemWidth+i.endPos.x)+"px)",i.$lis[i.next].style.transform="translateX("+(i.itemWidth+i.endPos.x)+"px)"}}var i=this;i.$ul.addEventListener("touchmove",e)},touchEnd:function(){function t(){e.endPos.x>e.itemWidth/3?(e.index-=1,e.index=e.setIndex(e.index),e.$lis[e.pre].classList.add("hide")):e.endPos.x<-e.itemWidth/3&&(e.index+=1,e.index=e.setIndex(e.index),e.$lis[e.next].classList.add("hide")),e.endPos={x:0,y:0},e.$lis[e.index].style.transform="translateX(0)",e.$lis[e.pre].style.transform="translateX(-100%)",e.$lis[e.next].style.transform="translateX(100%)",[].forEach.call(e.$lis,function(t){t.classList.add("tran")})}var e=this;e.$ul.addEventListener("touchend",t)},setIndex:function(t){var e=this;return-1==t&&(t=e.len-1),t==e.len&&(t=0),e.pre=t-1==-1?e.len-1:t-1,e.next=t+1==e.len?0:t+1,t},getMask:function(){if(t.querySelector(".ui-m-iv-mask"))return t.querySelector(".ui-m-iv-mask").classList.remove("hide"),t.body.classList.add("ui-m-iv-oh"),t.documentElement.classList.add("ui-m-iv-oh"),!1;var e="<div class='ui-m-iv-mask' ></div>";t.body.insertAdjacentHTML("beforeEnd",e),t.body.classList.add("ui-m-iv-oh"),t.documentElement.classList.add("ui-m-iv-oh")},closeMask:function(){t.querySelector(".ui-m-iv-mask").classList.add("hide"),t.body.classList.remove("ui-m-iv-oh"),t.documentElement.classList.remove("ui-m-iv-oh")}},l},document,window);